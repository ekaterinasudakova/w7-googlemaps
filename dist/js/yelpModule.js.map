{"version":3,"sources":["yelpModule.js"],"names":["YelpModule","API_KEY","termEl","document","getElementById","locationEl","searchBtn","resultsEl","results","addEventListener","e","preventDefault","queryTerm","value","location","prices","getCheckedValues","querySelectorAll","console","log","searchYelp","checkedItems","checkedValues","map","checkedItem","allChecked","join","displayArticle","article","title","name","thumbnail","image_url","url","liEl","createElement","linkEl","imgEl","pOneEl","pTwoEl","pThreeEl","pEl","createTextNode","href","src","innerHTML","address1","address2","address3","price","rating","appendChild","push","lat","coordinates","latitude","lng","longitude","displayArticles","articleArray","length","i","tempArrayElement","createMarkers","options","searchParams","Object","assign","axios","get","params","headers","then","response","data","businesses","search"],"mappings":"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","file":"yelpModule.js","sourcesContent":["var YelpModule = (function(){\n\n\tconst API_KEY = \"2-eO6_aZS3e3d9Q35TFJ8OAyiFXsSS9X3jqYz_A2fMGZjwnckl6kDHcqJRuF-T261k7jC6qWLnEUIvi5-l-qw7JeHANXoNtnF3Y0VC02R-KJywyBqm5vI6TISGPiWnYx\";\n\n\tconst termEl = document.getElementById('term');\n\tconst locationEl = document.getElementById('location');\n\tconst searchBtn = document.getElementById('search');\n\tconst resultsEl = document.getElementById('results');\n\n\tconst results = [];\n\n\n\n\tsearchBtn.addEventListener('click', function(e){\n\t\te.preventDefault();\n\t\tconst queryTerm = termEl.value;\n\t\tconst location = locationEl.value;\n\t\tconst prices = getCheckedValues(document.querySelectorAll('[name=price]:checked'));\n\t\tconsole.log(`The business type you entered is: `, queryTerm);\n\t\tconsole.log(`The location you entered is: `, location);\n\n\t\tsearchYelp({\n\t\t\t'location': location,\n\t\t\t'term': queryTerm,\n\t\t\t'price': prices\n\t\t});\n\n\t})\n\n\tfunction getCheckedValues(checkedItems){\n\t\tconsole.log('checkedItems', checkedItems)\n\t\t//OPTION 1: the old-school JS way\n\t\t// let allChecked = '';\n\t\t// for (var i= checkedItems.length -1; i>= 0; i--){\n\t\t// \tvar checkedItem = checkedItems[i].value\n\t\t// \tconsole.log('checkedItem', checkedItem)\n\t\t// \tallChecked = allChecked + ',' + checkedItem\n\t\t// }\n\n\t\t//OPTION 2: the ES6 way\n\n\t\t//turns node list into array[...]\n\t\tconst checkedValues = [...checkedItems].map(function(checkedItem){\n\t\t\treturn checkedItem.value;\n\t\t})\n\t\tconst allChecked = checkedValues.join(',');\n\t\tconsole.log('allChecked', allChecked)\n\t\t//\n\t\treturn allChecked\n\t}\n\n//THIS IS WHERE YOU GRAB THE STUFF YOU NEED FROM THE INFORMATION YOU GRABBED FROM YELP\n//THIS IS ALSO WHERE YOU APPEND THE ELEMENTS TO THE PAGE\n\tfunction displayArticle(article){\n\t\tconsole.log(\"THIS\", article)\n\t\tconst title = article.name;\n\t\t// pick any kind of default fallback image\n\t\tlet thumbnail = article.image_url;\n\t\tconst url = article.url;\n\n\t\tconst liEl = document.createElement('li');\n\t\tconst linkEl = document.createElement('a');\n\t\tconst imgEl = document.createElement('img');\n\n\t\tconst pOneEl = document.createElement('p');\n\t\tconst pTwoEl = document.createElement('p');\n\t\tconst pThreeEl = document.createElement('p');\n\n\t\t\n\n\t\tconst pEl = document.createTextNode(title);\n\t\t//url\n\t\tlinkEl.href = url;\n\t\t//image\n\t\timgEl.src = thumbnail;\n\t\t//address\n\t\tpOneEl.innerHTML = article.location.address1 + \",\" + \"<br/>\" + article.location.address2 + \",\" + \"<br/>\" + article.location.address3;\n\t\t//money\n\t\tpTwoEl.innerHTML = article.price;\n\t\t//rating\n\t\tpThreeEl.innerHTML = article.rating;\n\n\t\tliEl.appendChild(linkEl);\n\t\tlinkEl.appendChild(pEl);\n\t\tliEl.appendChild(imgEl);\n\t\tliEl.appendChild(pOneEl);\n\t\tliEl.appendChild(pTwoEl);\n\t\tliEl.appendChild(pThreeEl);\n\n\t\tresultsEl.appendChild(liEl);\n\n\t\tresults.push({\n\t\t\tlat: article.coordinates.latitude,\n\t\t\tlng: article.coordinates.longitude\n\t\t})\n\t}\n\n//THIS IS WHERE YOU LOOP THROUGH ALL YOUR RESULTS AND PULL OUT EACH RESULT TO THEN SEND\n//TO DIFFERENT FUNCTION TO FIND ALL NEEDED ELEMENTS AND APPEND THEM\n\tfunction displayArticles(articleArray) {\n\t\tconsole.log(\"HeyO\");\n\t\tconsole.log(articleArray.length);\n\t\tif (articleArray.length) {\n\t\t\tresultsEl.innerHTML = '';\n\t\t\tfor (var i = 0; i <= articleArray.length - 1; i++) {\n\t\t\t\tvar tempArrayElement = articleArray[i];\t\t\t\n\t\t\t\tdisplayArticle(tempArrayElement);\n\t\t\t}\n\t\t\t// now add the new results\t\n\t\t\tconsole.log(\"Here I am\")\n\t\t\t// send it over to google\n\t\t\tcreateMarkers(results);\n\t\t}\t\n\t}\n\n\tfunction searchYelp(options){\n\t\tconst searchParams = Object.assign({}, options, {\n\t\t\t'_ep': '/businesses/search',\n\t\t})\n\t\tconsole.log('searchParams', searchParams)\n\n\t\taxios.get('https://circuslabs.net/proxies/yelp-fusion-proxy/', {\n  \t\t\tparams: searchParams,\n  \t\t\theaders: {\n  \t\t\t\t'Authorization': 'Bearer ' + API_KEY\n  \t\t\t}\n  \t\t})\n\t\t\n\t\t.then(function (response) {\n\t\t\tconsole.log('here is the response data from key:', response.data, response)\n\n\t\t\tdisplayArticles(response.data.businesses);\n\t\t})\t\n\t}\n\n\t\treturn{\n\t\t\tsearch: searchYelp\n\t\t} \n\n})()"]}